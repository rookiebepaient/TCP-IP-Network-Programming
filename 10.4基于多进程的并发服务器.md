# 10.4 基于多进程的并发服务器
## 通过`fork`函数复制文件描述符
`echo_mpserv.cpp`中给出了通过`fork`函数复制文件描述符的过程。父进程将2个套接字（一个是服务器端套接字，另一个是与客户端连接的套接字）文件描述符复制给子进程
### 是否将套接字也复制给了子进程呢？
套接字并非进程所有，从严格意义上讲，套接字属于操作系统，只是进程拥有代表响应套接字的文件描述符。
而且，如果复制套接字后，同一端口将对应多个套接字，所以复制套接字也并不合理
所以，在调用`fork`函数后，2个文件描述符指向同一个套接字。
一个套接字中存在2个文件描述符时，只有2个文件描述符都终止（销毁）后，才能销毁套接字。即使子进程销毁了与客户端连接的套接字文件描述符，也无法完全销毁套接字（服务器端套接字同样如此）因此，调用`fork`函数后，要将无关的套接字文件描述符关掉