# 15套接字和标准I/O
## 标准I/O函数的两个优点
1. 标准I/O函数具有良好的可移植性
   这些函数都是按照ANSI C标准定义的，可以在不同操作系统移植。
   但是系统函数不可以。
2. 标准I/O函数可以利用缓冲提高性能
   与套接字中的缓冲目的不同，套接字中的缓冲是为了实现TCP协议而实现的。
   而IO缓冲是为了提高性能。系统IO函数没有缓冲

## 使用缓冲可以大大提高性能吗？
需要传输的数据越多的时候，有无缓冲带来的性能差异越大
1. 传输的数据量越大，缓冲带来的效果越明显
2. 数据向输出缓冲移动的次数越少，缓冲带来的效果越明显

## 标准IO函数的几个缺点
1. 不容易进行双向通信
2. 有时可能频繁调用fflush函数
3. 需要以FILE结构体指针的形式返回文件描述符
打开文件时，如果希望同时进行读写操作，则应以r+，w+，a+模式打开。但因为缓冲的缘故， 每次接环读写工作状态时应调用fflush函数。这会影响基于缓冲的性能提高
为了使用标准IO函数，需要FILE结构体指针。而创建套接字默认返回文件描述符，需要将文件描述符转化为FILE指针

## 15.2使用标准IO函数
创建套接字时返回文件描述符，为了使用标准IO函数，只能将其转换为FILE结构体指针
### fdopen函数转换为FILE指针
```C++
#include <stdio.h>
// 成功返回转换的FILE结构体指针，失败是返回NULL
FILE *fdopen(int fileds, const char *mode);
```
